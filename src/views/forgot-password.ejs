<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('./ui/head.ejs') %>
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
</head>

<body>
  <%- include('./component/background.ejs') %>

    <div class="hero is-fullheight">
      <div class="hero-body is-justify-content-center is-align-items-center">
        <div class="columns is-flex is-flex-direction-column box"
          style="background: rgba(0,0,0,0.53)!important; color: white;">
          <%- include('./component/logo.ejs') %>


            <div class="column">

              <div class="error">

              </div>
              <% if (errorMessage.length> 0) { %>
                <div class="column">

                  <div class="notification is-danger">
                    <%= errorMessage %>

                  </div>
                </div>

                <% } %>
                  <p>Strategy</p>

                  <select id="strategy" class="input is-primary" style="color: black;">
                    <option value="email" selected="selected">Email</option>
                    <option value="phone">Phone</option>
                  </select>
            </div>

            <form action="/auth/forgot-password/send-otp" method="post">

              <div id="input-auth" class="column">
                <label for="password">Email</label>
                <input class="input is-primary" required name="email" type="email" placeholder="Enter Email">
              </div>
              <div class="column">
                <button id="sendOTP" class="button is-primary is-fullwidth my-3" type="submit">Send</button>
              </div>
            </form>

        </div>
      </div>
    </div>


    <script>
      $(document).ready(function () {
        // create a new button element
        var strategy = $('#strategy')

        strategy.change(function () {
          var selectedValue = $(this).val();
          const notify = $('.error')
          notify.html('').removeClass('notification is-danger')

          if (selectedValue === "email") {
            $("#input-auth").html(
              ` <label for="email">Email</label>
                    <input class="input is-primary" required name="email" type="email" placeholder="Enter Email">`
            )
          } else {
            $("#input-auth").html(
              ` <label for="phone">Phone</label>
              <input id="phoneNumber" class="input is-primary" title="Please enter valid phone number "
                                            maxlength="12" pattern="((^(\+84){1})(3|5|7|8|9))+([0-9]{10})$"
                                            name="phone" size="20" required 
                                            oninvalid="setCustomValidity('Invalid number phone example: +840123456700.')"
                                            onchange="try{setCustomValidity('')}catch(e){}">`
            )
          }


        })


      });
    </script>

</body>

</html>